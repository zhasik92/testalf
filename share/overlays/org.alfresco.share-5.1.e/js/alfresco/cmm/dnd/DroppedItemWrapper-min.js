define(["dojo/_base/declare","alfresco/dnd/DroppedItemWrapper","dojo/_base/lang","dojo/_base/event","dojo/on","dojo/dom-class","dojo/dom-construct","dijit/registry"],function(h,l,c,b,i,m,f,a){return h([l],{i18nRequirements:[{i18nFile:"./i18n/DroppedItemWrapper.properties"}],cssRequirements:[{cssFile:"./css/DroppedItemWrapper.css"}],showAltText:"droppedItemWrapper.show.alt.text",showImg:"show-16.png",selectPublishTopic:"",focusPublishTopic:"",postMixInProperties:function k(){this.inherited(arguments);this.showAltText=this.encodeHTML(this.message(this.showAltText));this.showImageSrc=require.toUrl("cmm/dnd")+"/css/images/"+this.showImg},postCreate:function e(){this.inherited(arguments);i(this.domNode,"click",c.hitch(this,this.onItemEdit));i(this.domNode,"focus, focusout",c.hitch(this,this.onItemFocused));if(this.showNode==null){this.showNode=f.create("span",{className:"action show",tabIndex:"0",innerHTML:'<img class="image" src="'+this.showImageSrc+'" alt="'+this.showAltText+'" title="'+this.showAltText+'"/>'},this.editNode,"after")}},onItemEdit:function d(n){var o=c.getObject("currentTarget.id",false,n);if(o===""||a.byId(o)){this.inherited(arguments)}b.stop(n);if(this.selectPublishTopic!=""){this.alfPublish(this.selectPublishTopic,{item:o})}},onItemFocused:function g(n){if(this.focusPublishTopic!=""){this.alfPublish(this.focusPublishTopic,{item:n.type==="focus"?c.getObject("currentTarget.id",false,n):null})}},onEditSave:function j(p){this.inherited(arguments);if(type=c.getObject("wrapperSettings.type",false,p)){if(this.colsConfig){var n=c.getObject("allStyles",false,this.colsConfig);if(newPanelConfig=c.getObject(type,false,this.colsConfig)){var o=this.domNode;n.wrappers.forEach(function(q){m.remove(o,q)});m.add(this.domNode,newPanelConfig.wrapperClass);o=this.controlNode.firstChild;n.targets.forEach(function(q){m.remove(o,q)});m.add(this.controlNode.firstChild,newPanelConfig.targetClass);this.value.pseudonym=newPanelConfig.pseudonym;this.value.label=newPanelConfig.label;this.label=newPanelConfig.label;if(typeof this.updateLabel==="function"){this.updateLabel()}}}}}})});