(function(){var h=YAHOO.util.Dom,m=YAHOO.util.Event,l=YAHOO.util.Anim;var e=Alfresco.util.encodeHTML,a=Alfresco.util.isValueSet;var d="ygddfdiv";Alfresco.DocumentListTableViewRenderer=function(o,p,q,n){Alfresco.DocumentListTableViewRenderer.superclass.constructor.call(this,o,p,q);this.actionsColumnWidth=160;this.actionsSplitAtModifier=0;if(n!=null){this.jsonConfig=n;this.additionalJsonConfig=YAHOO.lang.JSON.parse(n)}else{this.additionalJsonConfig={}}return this};YAHOO.extend(Alfresco.DocumentListTableViewRenderer,Alfresco.DocumentListViewRenderer);Alfresco.DocumentListTableViewRenderer.prototype.getConfigWidth=function(p){var o=null;var n=p.width;if(n!=null){o=parseInt(n);if(o===NaN){o=null}}return o};Alfresco.DocumentListTableViewRenderer.prototype.renderView=function c(B,r,p,w){var n=h.get(B.id+this.parentElementIdSuffix);h.addClass(n,"alf-table");var q=this;B.widgets.dataTable.set("draggableColumns",false);var n=h.get(B.id+this.parentElementIdSuffix);var y=B.widgets.dataTable.getRecordSet();h.addClass(n,"alf-table");h.removeClass(h.get(B.id+"-table-config-button-container"),"hidden");B.widgets.dataTable.hideColumn("fileName");if(this.additionalJsonConfig!=null){if(this.additionalJsonConfig.actions!=null&&this.additionalJsonConfig.actions.show=="false"){B.widgets.dataTable.hideColumn("actions")}else{B.widgets.dataTable.showColumn("actions")}if(this.additionalJsonConfig.indicators!=null&&this.additionalJsonConfig.indicators.show=="false"){B.widgets.dataTable.hideColumn("status")}else{B.widgets.dataTable.showColumn("status")}if(this.additionalJsonConfig.selector!=null&&this.additionalJsonConfig.selector.show=="false"){B.widgets.dataTable.hideColumn("nodeRef")}else{B.widgets.dataTable.showColumn("nodeRef")}if(this.additionalJsonConfig.thumbnail!=null&&this.additionalJsonConfig.thumbnail.show=="false"){B.widgets.dataTable.hideColumn("thumbnail")}else{B.widgets.dataTable.showColumn("thumbnail")}if(this.additionalJsonConfig.propertyColumns!=null&&this.additionalJsonConfig.propertyColumns.length!=null){for(var t=0;t<this.additionalJsonConfig.propertyColumns.length;t++){var z=this.additionalJsonConfig.propertyColumns[t];if(z.property!=null){var o=null;var x=z.width;if(x!=null){o=parseInt(x);if(o===NaN){o=null}}var v={key:z.property,label:z.property,formatter:(z.link=="true")?this.fnRenderCellLinkProperty():this.fnRenderCellProperty(),sortable:false,width:this.getConfigWidth(z)};if(z.label!=null){v.label=B.msg(z.label)}B.widgets.dataTable.insertColumn(v)}}}if(this.additionalJsonConfig.actions==null||this.additionalJsonConfig.actions.show=="true"){var u=B.widgets.dataTable.removeColumn("actions");B.widgets.dataTable.insertColumn(u)}var s=B.widgets.dataTable.get("sortedBy")||{};var A=B.widgets.dataTable.getState();YAHOO.util.Dom.setStyle(B.id+this.parentElementIdSuffix,"display","");B.widgets.dataTable.onDataReturnInitializeTable.call(B.widgets.dataTable,r,p,w);B.widgets.dataTable.set("sortedBy",A.sortedBy)}};Alfresco.DocumentListTableViewRenderer.prototype.renderCellThumbnail=function j(B,A,C,v,r){var u=C.getData(),s=u.jsNode,y=s.properties,o=u.displayName,q=s.isContainer,t=s.isLink,x=o.substring(o.lastIndexOf(".")),n=s.nodeRef.nodeRef;var z;v.width=16;if(YAHOO.env.ua.ie>0){try{B.widgets.dataTable._elThead.children[0].children[2].children[0].style.width="16px"}catch(w){}}h.setStyle(A,"width",v.width+"px");h.setStyle(A.parentNode,"width",v.width+"px");if(q){A.innerHTML='<span class="folder-small">'+(t?'<span class="link"></span>':"")+(B.dragAndDropEnabled?'<span class="droppable"></span>':"")+Alfresco.DocumentList.generateFileFolderLinkMarkup(B,u)+'<img id="'+n+'" src="'+this.getFolderIcon(u.node)+'" /></a>'}else{var p=B.id+"-preview-"+C.getId();A.innerHTML='<span id="'+p+'" class="thumbnail">'+(t?'<span class="link"></span>':"")+Alfresco.DocumentList.generateFileFolderLinkMarkup(B,u)+'<img id="'+n+'" src="'+Alfresco.DocumentList.generateThumbnailUrl(u)+'" alt="'+x+'" title="'+e(o)+'" /></a></span>';B.previewTooltips.push(p)}};Alfresco.DocumentListTableViewRenderer.prototype.getDefaultFolderIcon=function i(){return"components/documentlibrary/images/folder-32.png"};Alfresco.DocumentListTableViewRenderer.prototype.getIconSize=function k(){return"32x32"};Alfresco.DocumentListTableViewRenderer.prototype.destroyView=function g(u,p,o,s){Alfresco.DocumentListTableViewRenderer.superclass.destroyView.call(this,u,p,o,s);if(!this.originalColumnDefinitions){this.originalColumnDefinitions=[];var r=u.widgets.dataTable.getColumnSet().getDefinitions();for(var q=0;q<r.length;q++){this.originalColumnDefinitions[q]=r[q]}}var n=h.get(u.id+this.parentElementIdSuffix);h.removeClass(n,"alf-table");h.addClass(h.get(u.id+"-table-config-button-container"),"hidden");if(this.originalColumnDefinitions){u.widgets.dataTable.showColumn("nodeRef");u.widgets.dataTable.showColumn("status");u.widgets.dataTable.showColumn("thumbnail");u.widgets.dataTable.showColumn("fileName");u.widgets.dataTable.showColumn("actions");var v=[];var t=u.widgets.dataTable.getColumnSet().getDefinitions();for(var q=t.length-1;q>=0;q--){switch(t[q].key){case"nodeRef":case"status":case"thumbnail":case"fileName":case"actions":break;default:u.widgets.dataTable.removeColumn(t[q].key)}}for(var q=0;q<this.originalColumnDefinitions.length;q++){switch(this.originalColumnDefinitions[q].key){case"nodeRef":case"status":case"thumbnail":case"fileName":case"actions":break;default:u.widgets.dataTable.insertColumn(this.originalColumnDefinitions[q])}}}};Alfresco.DocumentListTableViewRenderer.prototype.renderCellGenericString=function b(s,r,t,u){var o=r.getData(),q=o.jsNode,p=q.properties,n=p[t.field];if(n!=null){s.innerHTML='<span class="alf-generic-property">'+n+"</span>"}};Alfresco.DocumentListTableViewRenderer.prototype.renderCellMetadataLineRenderer=function f(y,w,z,u,o,A){var t="",q,p,s=z.getData(),n=s.jsNode;var v=function x(D,F,C){var B=(C!==null?"<em>"+y.msg(C)+"</em>: ":""),E="";if(y.renderers.hasOwnProperty(D)&&typeof y.renderers[D]==="function"){E=y.renderers[D].call(y,s,B)}else{if(n.hasProperty(D)){E='<span class="item">'+B+e(n.properties[D])+"</span>"}}return E};var r;if(!a(A.view)||A.view==this.metadataLineViewName){r=YAHOO.lang.substitute(A.template,y.renderers,v);if(a(r)){t+='<div class="detail">'+r+"</div>"}}w.innerHTML=t}})();