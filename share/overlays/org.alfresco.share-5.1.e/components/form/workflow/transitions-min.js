(function(){var i=YAHOO.util.Dom,k=YAHOO.util.Event;var h=Alfresco.util.encodeHTML;Alfresco.Transitions=function(l){Alfresco.Transitions.superclass.constructor.call(this,"Alfresco.Transitions",l,["button","container"]);YAHOO.Bubbling.on("formValidationError",this.onFormValidationError,this);return this};YAHOO.extend(Alfresco.Transitions,Alfresco.component.Base,{options:{currentValue:"",transitions:null},onReady:function a(){this._processTransitions();this._generateTransitionButtons()},onFormValidationError:function j(m,l){this._removeHiddenFields()},onClick:function e(o,p){p.set("disabled",true);var n=p.get("id");var m=n.substring(this.id.length+1);var l=this._getHiddenField();i.setAttribute(l,"value",m);if(Alfresco.logger.isDebugEnabled()){Alfresco.logger.debug("Set transitions hidden field to: "+m)}Alfresco.util.submitForm(p.getForm())},_processTransitions:function d(){this.options.transitions=[];if(Alfresco.logger.isDebugEnabled()){Alfresco.logger.debug("Processing transitions for field '"+this.id+"': "+this.options.currentValue)}if(this.options.currentValue!==null&&this.options.currentValue.length>0){var o=this.options.currentValue.split(",");for(var m=0,n=o.length;m<n;m++){var l=o[m].split("|");this.options.transitions.push({id:l[0],label:l[1]})}}if(Alfresco.logger.isDebugEnabled()){Alfresco.logger.debug("Built transitions list: "+YAHOO.lang.dump(this.options.transitions))}},_generateTransitionButtons:function g(){for(var l=0,m=this.options.transitions.length;l<m;l++){this._generateTransitionButton(this.options.transitions[l])}},_generateTransitionButton:function b(m){var l=document.createElement("input");l.setAttribute("id",this.id+"-"+m.id);l.setAttribute("value",m.label);l.setAttribute("type","button");i.get(this.id+"-buttons").appendChild(l);var l=Alfresco.util.createYUIButton(this,m.id,this.onClick);YAHOO.Bubbling.fire("addSubmitElement",l)},_getHiddenField:function f(){var l=i.get(this.id+"-hidden");if(l===null){l=document.createElement("input");l.setAttribute("id",this.id+"-hidden");l.setAttribute("type","hidden");l.setAttribute("name","prop_transitions");i.get(this.id).appendChild(l)}return l},_removeHiddenFields:function c(){var l=i.get(this.id+"-hidden");if(l!=null){i.get(this.id).removeChild(l)}}})})();