(function(){var e=YAHOO.util.Dom,c=YAHOO.util.Event;Alfresco.FolderMetadata=function a(g){Alfresco.FolderMetadata.superclass.constructor.call(this,"Alfresco.FolderMetadata",g);YAHOO.Bubbling.on("metadataRefresh",this.doRefresh,this);return this};YAHOO.extend(Alfresco.FolderMetadata,Alfresco.component.Base,{options:{nodeRef:null,site:null,formId:null},onReady:function f(){Alfresco.util.Ajax.request({url:Alfresco.constants.URL_SERVICECONTEXT+"components/form",dataObj:{htmlid:this.id+"-formContainer",itemKind:"node",itemId:this.options.nodeRef,formId:this.options.formId,mode:"view"},successCallback:{fn:this.onFormLoaded,scope:this},failureMessage:this.msg("message.failure"),scope:this,execScripts:true})},onFormLoaded:function b(g){var h=e.get(this.id+"-formContainer"),i=this;h.innerHTML=g.serverResponse.responseText;e.getElementsByClassName("viewmode-value-date","span",h,function(){var k=e.getAttribute(this,"data-show-time"),n=e.getAttribute(this,"data-date-iso8601"),j=(k=="false")?i.msg("date-format.defaultDateOnly"):i.msg("date-format.default"),l=k=="false",m=Alfresco.util.fromISO8601(n,l);this.innerHTML=Alfresco.util.formatDate(m,j)})},doRefresh:function d(){YAHOO.Bubbling.unsubscribe("metadataRefresh",this.doRefresh,this);this.refresh("components/folder-details/folder-metadata?nodeRef={nodeRef}"+(this.options.site?"&site={site}":"")+(this.options.formId?"&formId={formId}":""))}})})();